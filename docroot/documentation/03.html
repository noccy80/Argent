<!DOCTYPE html>
<html>
	<head>
		<title>Argent Documentation</title>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="../style/style.css" />
		<style></style>
	</head>
	<body><div class="marginalized">
		<h1>Argent Documentation</h1>
		<h2>Handlers</h2>
		<p>Handlers are special, optional parts of modules which expose some of the module functions to the network. If you haven't read the <a href="02.html">Modules page</a> in full, please do so before reading this page.</p>
		<p>If your module is called myModule and is stored within the <span class="preform">mods</span> global variable like it's supposed to be, then your module's handler should be stored at <span class="preform">mods.myModule.handler</span> and in a special global variable called <span class="preform">sys.handlers.myModule</span></p>
		<p>But you should never have to assign those yourself. If you have configured Argent properly, these assignments will be made for you and will be available at all times that your module is capable of executing, so effectively always.</p>
		<p>Handlers need to contain two specific functions to operate. They are:</p>
		<p><ul>
			<li>handlesAction(a)</li>
			<li>handle(a, r, q)</li>
		</ul></p>
		<p><span class="preform">handlesAction(a)</span> accepts a string - the action to be handled - and returns <span class="preform">true</span> if it can handle the action or <span class="preform">false</span> if it cannot.</p>
		<p><span class="preform">handle(a, r, q)</span> accepts, in sequence, an action string, a node.js request object and the query string parsed into a node.js query object. It returns an object with at least the following base structure:</p>
<pre>
{
    headers:{"content-type":"application/json"},
    response:{}
}
</pre>
		<p>The <span class="preform">headers</span> object will be sent as actual HTTP headers. If you wish to set any HTTP headers, add them to this object.</p>
		<p>The <span class="preform">response</span> object will be sent as the body of the HTTP response. It should be a normal JSON object. It can otherwise contain any information you find necessary to send to the client.</p>
		<p>If you need a good handler example, check out <span class="preform">session_hdl.js</span>, as it is a glowing, solitary example.</p>
	</body>
</html>
